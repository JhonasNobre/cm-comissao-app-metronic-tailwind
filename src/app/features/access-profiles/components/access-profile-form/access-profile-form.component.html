<div class="flex flex-col h-full">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-gray-800">
            {{ isEditMode ? 'Editar Perfil' : 'Cadastro de Perfil' }}
        </h2>
        <div class="flex gap-2">
            <button pButton type="button" label="Cancelar" class="p-button-secondary" (click)="onCancel()"></button>
            <button pButton type="button" label="Salvar" (click)="onSubmit()"></button>
        </div>
    </div>

    <!-- Tabs (PrimeNG v20+ Syntax) -->
    <p-tabs value="0" styleClass="flex-1">
        <p-tablist>
            <p-tab value="0">Dados Gerais</p-tab>
            <p-tab value="1">Liberação de Acessos</p-tab>
            <p-tab value="2">Horário de Trabalho</p-tab>
        </p-tablist>

        <p-tabpanels styleClass="pt-4">
            <!-- Aba 1: Dados Gerais -->
            <p-tabpanel value="0">
                <app-profile-general-tab [form]="form"></app-profile-general-tab>
            </p-tabpanel>

            <!-- Aba 2: Liberação de Acessos -->
            <p-tabpanel value="1">
                <app-profile-access-tab [form]="form" [resources]="resources" [permissionRows]="permissionRows"
                    (permissionsChange)="onPermissionsChange($event)">
                </app-profile-access-tab>
            </p-tabpanel>

            <!-- Aba 3: Horário de Trabalho -->
            <p-tabpanel value="2">
                <app-profile-schedule-tab [form]="$any(form.get('restricaoHorario'))"
                    [hasRestricaoHorario]="hasRestricaoHorario" [diasSemanaOptions]="diasSemanaOptions"
                    [initialHolidays]="initialHolidays" (restricaoHorarioToggle)="toggleRestricaoHorario($event)"
                    (addHorarioClick)="addHorario()" (removeHorarioClick)="removeHorario($event)">
                </app-profile-schedule-tab>
            </p-tabpanel>
        </p-tabpanels>
    </p-tabs>
</div>